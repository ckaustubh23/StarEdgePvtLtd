<div class="user-management-container">
  <h1>User Management</h1>

  <div class="toolbar">
    <div class="search-box">
      <input
        type="text"
        placeholder="Search users..."
        [(ngModel)]="searchText"
        (input)="filterUsers()"
      />
    </div>

    <div class="action-bar">
      <button (click)="toggleForm()" class="add-user-btn">
        Add New User
      </button>
    </div>
  </div>


  <!-- User list table -->
  <div class="user-table-container" *ngIf="filteredUsers.length > 0">
    <table class="user-table">
      <thead>
        <tr>
          <th>Sr. No.</th>
          <th>First Name</th>
          <th>Last Name</th>
          <th>Email</th>
          <th>Mobile</th>
          <th>Gender</th>
          <th>Role</th>
          <th>City</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let user of filteredUsers; let i = index">
          <td>{{ i + 1 }}</td>
          <td>{{ user.firstName }}</td>
          <td>{{ user.lastName }}</td>
          <td>{{ user.email }}</td>
          <td>{{ user.mobileNo }}</td>
          <td>{{ user.gender }}</td>
          <td>{{ user.role }}</td>
          <td>{{ user.city }}</td>
        </tr>
      </tbody>
    </table>
  </div>

  <div *ngIf="filteredUsers.length === 0" class="no-users">
    No users found
  </div>

  <!-- MODAL -->
  <div class="modal-overlay" *ngIf="showForm" (click)="closeModal($event)">
    <div class="modal-content" (click)="$event.stopPropagation()">
      <h2>Add New User</h2>

      <form [formGroup]="userForm" (ngSubmit)="onSubmit()" class="user-form">
        <div class="form-group">
          <label for="firstName">First Name</label>
          <input
            type="text"
            id="firstName"
            formControlName="firstName"
            placeholder="Enter First Name"
          />
          <small
            *ngIf="
              userForm.get('firstName')?.touched &&
              userForm.get('firstName')?.invalid
            "
            >First name is required</small
          >
        </div>

        <div class="form-group">
          <label for="lastName">Last Name</label>
          <input
            type="text"
            id="lastName"
            formControlName="lastName"
            placeholder="Enter Last Name"
          />
        </div>

        <div class="form-group">
          <label for="email">Email</label>
          <input
            type="email"
            id="email"
            formControlName="email"
            placeholder="Enter Email"
          />
        </div>

        <div class="form-group">
          <label for="mobileNo">Mobile No.</label>
          <input
            type="number"
            id="mobileNo"
            formControlName="mobileNo"
            placeholder="Enter Mobile No."
          />
        </div>

        <div class="form-group">
          <label for="gender">Gender</label>
          <select id="gender" formControlName="gender">
            <option value="">Select Gender</option>
            <option value="male">Male</option>
            <option value="female">Female</option>
            <option value="other">Other</option>
          </select>
        </div>

        <div class="form-group">
          <label for="role">Role</label>
          <select id="role" formControlName="role">
              <option value="">Select Role</option>
              <option *ngFor="let role of filteredRoles" [value]="role.value">
                {{role.label}}
              </option>
          </select>
        </div>

        <div class="modal-actions">
          <button type="submit" [disabled]="userForm.invalid">Save</button>
          <button type="button" class="cancel-btn" (click)="toggleForm()">
            Cancel
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
